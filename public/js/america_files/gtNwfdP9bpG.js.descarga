if (self.CavalryLogger) { CavalryLogger.start_js(["oCoL6"]); }

__d("CometRemote360PhotoViewer_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometRemote360PhotoViewer_photo",selections:[{alias:null,args:null,concreteType:"PhotoEncoding",kind:"LinkedField",name:"photo_encodings",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},{alias:null,args:null,concreteType:"PhotosphereMetadata",kind:"LinkedField",name:"spherical_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_horizontal_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_vertical_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_pitch_degrees",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_tile_level",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"tileInfoList"}],b=[{kind:"Variable",name:"id",variableName:"id"}],c={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"tile_info_list",variableName:"tileInfoList"}],concreteType:"PhotoTile",kind:"LinkedField",name:"tiles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"PhotoEncoding",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c],storageKey:null}]},params:{id:"3714281145266614",metadata:{},name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometFeedStoryImmersiveMediaMouseOverlay.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=a.descriptionFbt,d=a.isActive;a=a.showClick;return h.jsxs("div",{className:(g||(g=b("stylex"))).dedupe({"bottom-1":"d2iitwg3","opacity-1":"pedkr2u6","pointer-events-1":"hzruof5a","position-1":"pmk7jnqg","start-1":"kfkz5moi","transform-0.1":"tvo4c8rq"},d?null:{"opacity-1":"b5wmifdl"}),children:[h.jsx("div",{className:"ov9facns kfkz5moi pmk7jnqg qx04eu75 k7cz35w2 hioi5xb0 awevd9ak ee40wjg4 r7fvqmod",children:h.jsx("div",{className:"sk3xx2xc ee40wjg4 r7fvqmod",children:h.jsxs("div",{className:"kz4qo9ow ee40wjg4 r7fvqmod",children:[h.jsx("div",{className:"pgctjfs5 affysrvo pmk7jnqg tv7at329 omcyoz59 ed597pkb kb8x4rkr qw6c0r16 kaqsd373"}),h.jsxs("div",{className:"ov9facns dimoa7g4 pmk7jnqg stjgntxs ni8dbmo4 fz6q6hdd mrjvor2e jinzq4gt jos75b7i t0qjyqq4",children:[h.jsx("div",{className:a?"c9rrlmt1 pmk7jnqg ooasylqa q2y6ezfg j3og7z1a ee40wjg4 r7fvqmod":"c9rrlmt1 pmk7jnqg ooasylqa q2y6ezfg"}),h.jsx("div",{className:"c0wkt4kp oz4tkbee pmk7jnqg ooasylqa q2y6ezfg"})]}),h.jsx("div",{className:"ov9facns pmk7jnqg oeo4gz9l kv0toi1t j6sty90h h905i5nu monazrh9 q2y6ezfg"})]})})}),h.jsx("div",{className:"g0qnabr5 jb1g5q76 oqcyycmt dwxx2s2f dicw6rsg kady6ibp rs0gx3tq n3ffmt46 sq6gx45u ljqsnud1",children:c})]})}}),null);
__d("Comet360GyroOverlay.react",["fbt","React","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){a=a.isVisible;return h.jsx("div",{className:"orwu60u2 e4zzj2sf art1omkt jowmb856 py2didcb rk01pc8j kfkz5moi pmk7jnqg hzruof5a rdkrh8wx"+(a?"":" b5wmifdl"),children:h.jsxs("div",{className:"orwu60u2 l9j0dhe7 rdkrh8wx spb7xbtv bkmhp75w emlxlaya s45kfl79 ora8z2hr",children:[h.jsxs("div",{className:"ljni7pan tftn3vyl tmxdrx1h sgaxgfmg pmk7jnqg cb02d2ww k0bpgpbk tpcyxxvw qtyiw8t4 qxh1up0x mk2mc5f4 s44p3ltw ccm00jje goun2846 spb7xbtv bkmhp75w emlxlaya s45kfl79 lnmqs56w a5q45dxh rn9xp8wz pby8v4dq dn16736b ee40wjg4 r7fvqmod oeefd0zo",children:[h.jsx("div",{className:"dt25yw6b cj5g2342 kfkz5moi pmk7jnqg j0lfo8lj jcgfde61 afxsp9o4 ed0hlay0 frvqaej8 mk2mc5f4 s44p3ltw ccm00jje goun2846 spb7xbtv bkmhp75w emlxlaya s45kfl79 lnmqs56w a5q45dxh rn9xp8wz pby8v4dq a5zjgiyk ob8axjtb ee40wjg4 r7fvqmod oeefd0zo"}),h.jsx("div",{className:"kzys8otq ke6wolob rk01pc8j pmk7jnqg derph8ux jcgfde61 afxsp9o4 ed0hlay0 frvqaej8 mk2mc5f4 s44p3ltw ccm00jje goun2846 spb7xbtv bkmhp75w emlxlaya s45kfl79 lnmqs56w a5q45dxh rn9xp8wz pby8v4dq nc12k21y cuyhpc0r ee40wjg4 r7fvqmod oeefd0zo"})]}),h.jsx("div",{className:"dt25yw6b g0qnabr5 cj5g2342 ginu6rux kfkz5moi pmk7jnqg stjgntxs ni8dbmo4 cb02d2ww spb7xbtv bkmhp75w emlxlaya s45kfl79 a5zjgiyk pm1owuca ee40wjg4 r7fvqmod oeefd0zo",children:h.jsx("span",{className:"dt25yw6b cj5g2342 oqcyycmt kfkz5moi pmk7jnqg b0hsfc2p cb02d2ww gfeo3gy3 ljqsnud1",children:g._("360\u00b0")})})]})})}}),null);
__d("Comet360PhotoRenderer",[],(function(a,b,c,d,e,f){"use strict"}),null);
__d("CometWebGLCubemapTexture",["recoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.$2=a.createTexture(),this.initializeTexture()}var c=a.prototype;c.initializeTexture=function(){var a=this.$1;a.bindTexture(a.TEXTURE_CUBE_MAP,this.$2);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);var b=new Uint8Array([0,0,0,0]);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.bindTexture(a.TEXTURE_CUBE_MAP,null)};c.setFace=function(a,c){var d=this.$1,e=0;switch(a){case 0:e=d.TEXTURE_CUBE_MAP_POSITIVE_X;break;case 1:e=d.TEXTURE_CUBE_MAP_NEGATIVE_Z;break;case 2:e=d.TEXTURE_CUBE_MAP_NEGATIVE_X;break;case 3:e=d.TEXTURE_CUBE_MAP_POSITIVE_Z;break;case 4:e=d.TEXTURE_CUBE_MAP_POSITIVE_Y;break;case 5:e=d.TEXTURE_CUBE_MAP_NEGATIVE_Y;break;default:b("recoverableViolation")("Cubemap face out of bounds","webgl");return}e!==0&&(d.bindTexture(d.TEXTURE_CUBE_MAP,this.$2),d.texImage2D(e,0,d.RGB,d.RGB,d.UNSIGNED_BYTE,c),d.bindTexture(d.TEXTURE_CUBE_MAP,null))};c.generateMipmap=function(){var a=this.$1;a.bindTexture(a.TEXTURE_CUBE_MAP,this.$2);a.generateMipmap(a.TEXTURE_CUBE_MAP);a.bindTexture(a.TEXTURE_CUBE_MAP,null)};c.bindToSlot=function(a){var b=this.$1;b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_CUBE_MAP,this.$2)};c.release=function(){this.$1.deleteTexture(this.$2)};return a}();e.exports=a}),null);
__d("CometWebGLIndexBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a,this.$1=a.createBuffer()}var b=a.prototype;b.bufferData=function(a){var b=this.$2;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$1);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a,b.STATIC_DRAW)};b.bindToElements=function(){var a=this.$2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.$1)};return a}();e.exports=a}),null);
__d("CometWebGLVertexBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a,this.$1=a.createBuffer()}var b=a.prototype;b.bufferData=function(a){var b=this.$2;b.bindBuffer(b.ARRAY_BUFFER,this.$1);b.bufferData(b.ARRAY_BUFFER,a,b.STATIC_DRAW)};b.bindToAttribute=function(a,b,c,d,e,f){var g=this.$2;g.bindBuffer(g.ARRAY_BUFFER,this.$1);g.vertexAttribPointer(a,b,c,d,e,f);g.enableVertexAttribArray(a)};return a}();e.exports=a}),null);
__d("getWebGLAttributeSizeAndType",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){b=b?WebGLRenderingContext.UNSIGNED_BYTE:WebGLRenderingContext.FLOAT;switch(a.type){case WebGLRenderingContext.FLOAT:return{size:1,type:b};case WebGLRenderingContext.FLOAT_VEC2:return{size:2,type:b};case WebGLRenderingContext.FLOAT_VEC3:return{size:3,type:b};case WebGLRenderingContext.FLOAT_VEC4:return{size:4,type:b};case WebGLRenderingContext.FLOAT_MAT2:return{size:4,type:b};case WebGLRenderingContext.FLOAT_MAT3:return{size:9,type:b};case WebGLRenderingContext.FLOAT_MAT4:return{size:16,type:b}}return{size:1,type:b}}}),null);
__d("CometWebGLGeometry",["CometWebGLIndexBuffer","CometWebGLVertexBuffer","getWebGLAttributeSizeAndType","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){switch(a){case WebGLRenderingContext.BYTE:case WebGLRenderingContext.UNSIGNED_BYTE:return 1;case WebGLRenderingContext.SHORT:case WebGLRenderingContext.UNSIGNED_SHORT:return 2;case WebGLRenderingContext.FLOAT:return 4}b("recoverableViolation")("Unrecognized vertex type: "+a,"webgl");return 1}a=function(){function a(a,c){c===void 0&&(c={interleaved:!0}),this.$1=[],this.$2=new(b("CometWebGLVertexBuffer"))(a),this.$3=null,this.$4=0,this.$6=null,this.$7=null,this.$8=0,this.$9=c.interleaved!==!1,this.$5=a,this.$10=0}var c=a.prototype;c.addAttribute=function(a,c){c===void 0&&(c={normalize:!1});if(!this.$9&&c.offset==null)throw b("unrecoverableViolation")("Vertex Buffer is not interleaved but attribute was added without an offset","immersive_media");var d=!!c.normalize,e=b("getWebGLAttributeSizeAndType")(a,d),f=e.size;e=e.type;var h=g(e);this.$1.push({loc:a.location,normalize:d,offset:c.offset!=null?c.offset:this.$10,size:f,stride:c.stride!=null?c.stride:h*f,type:e});this.$10+=h*f};c.bufferData=function(a){if(a instanceof ArrayBuffer){this.$2.bufferData(a);this.$4=a.byteLength;return}if(this.$3&&a.length<=this.$3.length){for(var b=0;b<a.length;b++)this.$3[b]=a[b];for(var b=a.length;b<this.$3.length;b++)this.$3[b]=0}else this.$3=new Float32Array(a);this.$4=a.length*4;this.$2.bufferData(this.$3.buffer)};c.bufferIndex=function(a){if(this.$7&&a.length<this.$7.length){for(var c=0;c<a.length;c++)this.$7[c]=a[c];for(var c=a.length;c<this.$7.length;c++)this.$7[c]=0}else this.$7=new Uint16Array(a);this.$8=a.length;this.$6||(this.$6=new(b("CometWebGLIndexBuffer"))(this.$5));this.$6.bufferData(this.$7)};c.bindToAttributes=function(){for(var a=0;a<this.$1.length;a++){var b=this.$1[a];this.$2.bindToAttribute(b.loc,b.size,b.type,!!b.normalize,this.$9?this.$10:b.stride,b.offset)}this.$6&&this.$6.bindToElements()};c.draw=function(){if(this.$9&&this.$4%this.$10!==0){b("recoverableViolation")("Geometry buffer length is not perfectly divisible by stride","webgl");return}var a=this.$5;if(this.$7)a.drawElements(a.TRIANGLES,this.$8,a.UNSIGNED_SHORT,0);else{var c=this.$4/this.$10;a.drawArrays(a.TRIANGLES,0,c)}};return a}();e.exports=a}),null);
__d("CometWebGLTexture",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){var c;b===void 0&&(b=Object.freeze({}));this.$1=a;this.$4=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.$4);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);this.$5=(c=b.width)!=null?c:0;this.$2=(c=b.height)!=null?c:0;if("source"in b){c=b.source;c==null?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.$5,this.$2,0,a.RGBA,a.UNSIGNED_BYTE,c):this.setSource(c)}else a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]))}var b=a.prototype;b.getGLTexture=function(){return this.$4};b.setSource=function(a,b){b===void 0&&(b=!1);this.$3=a;var c=this.$1;c.bindTexture(c.TEXTURE_2D,this.$4);a instanceof Image&&(c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,b?1:0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a),this.$5=a.naturalWidth,this.$2=a.naturalHeight);c.bindTexture(c.TEXTURE_2D,null)};b.bindToSlot=function(a){var b=this.$1;b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_2D,this.$4)};return a}();e.exports=a}),null);
__d("CometWebGLMesh",["CometWebGLCubemapTexture","CometWebGLGeometry","CometWebGLTexture","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){d===void 0&&(d={interleaved:!0}),this.$1=a,this.geometry=new(b("CometWebGLGeometry"))(a,{interleaved:d.interleaved!==!1}),this.program=c,this.renderOrder=1,this.uniforms={},this.visible=!0}var c=a.prototype;c.addAttribute=function(a,b){a=this.program.getAttribute(a);if(a==null)return this;this.geometry.addAttribute(a,b);return this};c.setUniform=function(a,b){this.uniforms[a]=b};c.getUniform=function(a){return this.uniforms[a]};c.unsetUniform=function(a){delete this.uniforms[a]};c.bufferData=function(a){this.geometry.bufferData(a)};c.bufferIndex=function(a){this.geometry.bufferIndex(a)};c.setVisible=function(a){this.visible=a};c.draw=function(){if(!this.visible)return;var a=0,c=this.program,d=c.getUniforms();for(var e in d){d=null;e in this.uniforms?d=this.uniforms[e]:d=c.getDefaultValueForUniform(e);var f=c.getUniform(e);if(f==null)throw b("unrecoverableViolation")("Specified uniform does not exist in program: "+e,"immersive_media");typeof d==="number"?f.set(d):Array.isArray(d)||d instanceof Float32Array?f.set(d):(d instanceof b("CometWebGLTexture")||d instanceof b("CometWebGLCubemapTexture"))&&(d.bindToSlot(a),f.set(a),a++)}this.geometry.bindToAttributes();this.geometry.draw()};return a}();e.exports=a}),null);
__d("defaultValueForWebGLUniform",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){switch(a){case WebGLRenderingContext.FLOAT:return 0;case WebGLRenderingContext.FLOAT_VEC2:return[0,0];case WebGLRenderingContext.FLOAT_VEC3:return[0,0,0];case WebGLRenderingContext.FLOAT_VEC4:return[0,0,0,0];case WebGLRenderingContext.INT:return 0;case WebGLRenderingContext.INT_VEC2:return[0,0];case WebGLRenderingContext.INT_VEC3:return[0,0,0];case WebGLRenderingContext.INT_VEC4:return[0,0,0,0];case WebGLRenderingContext.FLOAT_MAT2:return[0,0,0,0];case WebGLRenderingContext.FLOAT_MAT3:return[0,0,0,0,0,0,0,0,0];case WebGLRenderingContext.FLOAT_MAT4:return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];case WebGLRenderingContext.SAMPLER_2D:return null;default:return null}}}),null);
__d("extractAttributesFromWebGLProgram",["recoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){var d={},e=a.getProgramParameter(c,a.ACTIVE_ATTRIBUTES);for(var f=0;f<e;f++){var g=a.getActiveAttrib(c,f);if(!g){b("recoverableViolation")("Attempted to retrieve an attribute that did not exist","webgl");continue}var h=a.getAttribLocation(c,g.name);d[g.name]={location:h,size:g.size,type:g.type}}return d}}),null);
__d("createWebGLUniformSetter",["recoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c,d){switch(d){case a.FLOAT:return a.uniform1f.bind(a,c);case a.FLOAT_VEC2:return a.uniform2fv.bind(a,c);case a.FLOAT_VEC3:return a.uniform3fv.bind(a,c);case a.FLOAT_VEC4:return a.uniform4fv.bind(a,c);case a.INT:return a.uniform1i.bind(a,c);case a.INT_VEC2:return a.uniform2iv.bind(a,c);case a.INT_VEC3:return a.uniform3iv.bind(a,c);case a.INT_VEC4:return a.uniform4iv.bind(a,c);case a.FLOAT_MAT2:return a.uniformMatrix2fv.bind(a,c,!1);case a.FLOAT_MAT3:return a.uniformMatrix3fv.bind(a,c,!1);case a.FLOAT_MAT4:return a.uniformMatrix4fv.bind(a,c,!1);case a.SAMPLER_2D:return a.uniform1i.bind(a,c);case a.SAMPLER_CUBE:return a.uniform1i.bind(a,c);default:return function(){b("recoverableViolation")("This uniform type is not supported: "+d,"webgl")}}}}),null);
__d("extractUniformsFromWebGLProgram",["createWebGLUniformSetter","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){var d={},e=a.getProgramParameter(c,a.ACTIVE_UNIFORMS);for(var f=0;f<e;f++){var g=a.getActiveUniform(c,f);if(!g){b("recoverableViolation")("Attempted to retrieve a uniform that did not exist","webgl");continue}var h=a.getUniformLocation(c,g.name);d[g.name]={location:h,set:b("createWebGLUniformSetter")(a,h,g.type),size:g.size,type:g.type}}return d}}),null);
__d("CometWebGLProgram",["defaultValueForWebGLUniform","extractAttributesFromWebGLProgram","extractUniformsFromWebGLProgram","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1={},this.$3=null,this.$4=[],this.$5={},this.$6={},this.$2=a}var c=a.prototype;c.addShader=function(a,c,d){if(this.$3){b("recoverableViolation")("Cannot add a shader, the program has already been compiled","webgl");return this}var e=a;if(d){d=d.map(function(a){return"#define "+a+"\n"}).join("");if(a.startsWith("#version")){var f=a.indexOf("\n")+1;e=a.substr(0,f)+d+a.substr(f)}else e=d+a}this.$4.push({code:e,type:c});return this};c.compile=function(){if(this.$3){b("recoverableViolation")("Cannot compile, the program has already been compiled","webgl");return this}var a=this.$2,c=this.$4.map(function(c){var d=c.code;c=c.type;c=a.createShader(c);a.shaderSource(c,d);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS)){d=a.getShaderInfoLog(c)||"";a.deleteShader(c);b("recoverableViolation")("Failed to compile shader: "+d,"webgl")}return c}),d=a.createProgram();for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;a.attachShader(d,g)}a.linkProgram(d);if(!a.getProgramParameter(d,a.LINK_STATUS)){g=a.getProgramInfoLog(d)||"";a.deleteProgram(d);b("recoverableViolation")("Failed to link program: "+g,"webgl");return this}this.$3=d;this.$6=b("extractUniformsFromWebGLProgram")(a,d);this.$1=b("extractAttributesFromWebGLProgram")(a,d);return this};c.use=function(){if(!this.$3){b("recoverableViolation")("Cannot use Program before it has been compiled","webgl");return}this.$2.useProgram(this.$3)};c.getUniform=function(a){var c=this.$6[a];if(!c){b("recoverableViolation")("Program does not have a uniform called "+a,"webgl");return null}return c};c.getUniforms=function(){return this.$6};c.getAttribute=function(a){var c=this.$1[a];if(!c){b("recoverableViolation")("Program does not have an attribute called "+a,"webgl");return null}return c};c.setUniformDefaults=function(a){for(var b in a)this.$5[b]=a[b];return this};c.getDefaultValueForUniform=function(a){if(!(a in this.$6)){b("recoverableViolation")("Program does not have a uniform called "+a,"webgl");return null}if(a in this.$5){var c=this.$5[a];return Array.isArray(c)?c.slice():c}return b("defaultValueForWebGLUniform")(this.$6[a].type)};return a}();e.exports=a}),null);
__d("createWebGLEquirectSphericalPhotoProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g="\nattribute vec3 a_position;\nattribute vec2 a_textureCoord;\n\nvarying highp vec2 v_textureCoord;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n\nvoid main() {\n    gl_Position = projectionMatrix * viewMatrix * vec4(a_position, 1);\n    v_textureCoord = a_textureCoord;\n}\n",h="\nvarying highp vec2 v_textureCoord;\n\nuniform sampler2D u_sampler;\n\nvoid main() {\n    gl_FragColor = texture2D(u_sampler, v_textureCoord);\n}\n";function a(a){var c=new(b("CometWebGLProgram"))(a);return c.addShader(g,a.VERTEX_SHADER).addShader(h,a.FRAGMENT_SHADER).compile()}}),null);
__d("CometWebGLSphericalMesh",["CometWebGLMesh","CometWebGLTexture","createWebGLEquirectSphericalPhotoProgram"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var c=30,d=30;this.$1=a;this.$2=new(b("CometWebGLMesh"))(a,b("createWebGLEquirectSphericalPhotoProgram")(a));this.$4=!1;this.$3=new(b("CometWebGLTexture"))(a);this.$2.addAttribute("a_position");this.$2.addAttribute("a_textureCoord");a=this.$5(c,d);this.$2.bufferData(a);a=this.$6(c,d);this.$2.bufferIndex(a)}var c=a.prototype;c.draw=function(a,b){this.$2.setUniform("viewMatrix",a),this.$2.setUniform("projectionMatrix",b),this.$2.setUniform("u_sampler",this.$3),this.$2.program.use(),this.$2.draw()};c.$5=function(a,b){var c=2,d=[],e=600,f=300,g=600,h=300,i=0/h,j=0/g;f=f/h;h=e/g;for(var e=0;e<=a;e++){g=i+e/a*f;g=(.5-g)*Math.PI;var k=Math.sin(g);g=Math.cos(g);for(var l=0;l<=b;l++){var m=j+l/b*h;m=(m-.75)*2*Math.PI;var n=Math.sin(m);m=Math.cos(m);m=m*g;var o=k;n=n*g;d.push(c*m);d.push(c*o);d.push(c*n);m=l/b;o=e/a;d.push(m);d.push(o)}}return d};c.$6=function(a,b){var c=[];for(var d=0;d<a;d++)for(var e=0;e<b;e++){var f=d*(b+1)+e,g=f+b+1;c.push(f);c.push(g);c.push(f+1);c.push(g);c.push(g+1);c.push(f+1)}return c};c.loadTexture=function(a){this.$3.setSource(a),this.$4=!0};c.hasLoadedTextureSource=function(){return this.$4};return a}();e.exports=a}),null);
__d("Comet360PhotoSphericalRenderer",["Promise","Comet360PhotoRenderer","CometWebGLSphericalMesh","promiseDone"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e){var f=this;this.$1=a;this.$2=c;this.$3=d;this.$5=e;this.$4=new(b("CometWebGLSphericalMesh"))(a);b("promiseDone")(this.$2.fetchTextureImage().then(function(a){f.$4.loadTexture(a),f.$5(function(){f.draw()})}))}var c=a.prototype;c.initialize=function(){return new(b("Promise"))(function(a,b){a()})};c.draw=function(){if(!this.$4.hasLoadedTextureSource)return;var a=this.$1;a.clear(a.COLOR_BUFFER_BIT);this.$4.draw(this.$3.getViewMatrix(),this.$3.getProjectionMatrix())};return a}();e.exports=a}),null);
__d("Comet360PhotoTiledCubemapTile",[],(function(a,b,c,d,e,f){"use strict";f.hashCubemapTileInfo=a;function a(a){return"Level: "+a.level+"|Face: "+a.face+"|Col: "+a.col+"|Row: "+a.row}}),null);
__d("Comet360PhotoTiledCubemapTextureCache",["Comet360PhotoTiledCubemapTile","CometWebGLTexture","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.$2=new Map()}var c=a.prototype;c.hasTexture=function(a){a=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a);return this.$2.has(a)};c.getBestTileTexture=function(a){var c=a.level,d=a.col,e=a.row;while(c>=0){var f={col:d,face:a.face,level:c,row:e},g=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(f);g=this.$2.get(g);if(g!=null)return[g,f];c-=1;d=Math.floor(d/2);e=Math.floor(e/2)}throw b("unrecoverableViolation")('Unable to find a best texture for: "'+b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a)+'".',"immersive_media")};c.loadTexture=function(a,c){var d=null;c&&(d=new(b("CometWebGLTexture"))(this.$1),d.setSource(c,!0));this.$2.set(b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a),d)};return a}();e.exports=a}),null);
__d("Matrices",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){a=Math.tan(a/2)*c;var e=-a,f=a*b;b=e*b;return[2*c/(f-b),0,0,0,0,2*c/(a-e),0,0,(f+b)/(f-b),(a+e)/(a-e),(c+d)/(c-d),-1,0,0,c*d*2/(c-d),0]}function g(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function b(a,b,c){return[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]}function c(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=2/Math.sqrt(b*b+c*c+d*d+a*a);return[1-e*(c*c+d*d),e*(b*c+d*a),e*(b*d-c*a),0,e*(b*c-d*a),1-e*(b*b+d*d),e*(c*d+b*a),0,e*(b*d+c*a),e*(c*d-b*a),1-e*(b*b+c*c),0,0,0,0,1]}function d(a){return h(a[0],a[1],a[2])}function h(a,b,c){return[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]}function f(a){var b=a[0]*a[5]-a[1]*a[4],c=a[0]*a[6]-a[2]*a[4],d=a[0]*a[7]-a[3]*a[4],e=a[1]*a[6]-a[2]*a[5],f=a[1]*a[7]-a[3]*a[5],g=a[2]*a[7]-a[3]*a[6],h=a[8]*a[13]-a[9]*a[12],i=a[8]*a[14]-a[10]*a[12],j=a[8]*a[15]-a[11]*a[12],k=a[9]*a[14]-a[10]*a[13],l=a[9]*a[15]-a[11]*a[13],m=a[10]*a[15]-a[11]*a[14],n=b*m-c*l+d*k+e*j-f*i+g*h,o=(a[5]*m-a[6]*l+a[7]*k)/n,p=(a[2]*l-a[1]*m-a[3]*k)/n,q=(a[13]*g-a[14]*f+a[15]*e)/n,r=(a[10]*f-a[9]*g-a[11]*e)/n,s=(a[6]*j-a[4]*m-a[7]*i)/n;m=(a[0]*m-a[2]*j+a[3]*i)/n;var t=(a[14]*d-a[12]*g-a[15]*c)/n;g=(a[8]*g-a[10]*d+a[11]*c)/n;var u=(a[4]*l-a[5]*j+a[7]*h)/n;j=(a[1]*j-a[0]*l-a[3]*h)/n;l=(a[12]*f-a[13]*d+a[15]*b)/n;d=(a[9]*d-a[8]*f-a[11]*b)/n;f=(a[5]*i-a[4]*k-a[6]*h)/n;k=(a[0]*k-a[1]*i+a[2]*h)/n;i=(a[13]*c-a[12]*e-a[14]*b)/n;h=(a[8]*e-a[9]*c+a[10]*b)/n;return[o,p,q,r,s,m,t,g,u,j,l,d,f,k,i,h]}function i(a,b){var c=g();c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];c[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12];c[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13];c[6]=a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14];c[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15];c[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12];c[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13];c[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14];c[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15];c[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12];c[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13];c[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14];c[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15];return c}function j(a,b){var c=[0,0,0,0];c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];return c}function k(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}a={createIdentityMat4:g,createPerspectiveProjectionMatrix:a,createRotationMatrixFromQuaternion:c,createScalingMatrix:b,createTranslationMatrix:h,createTranslationMatrixFromVec:d,invertMat4:f,multiplyMat4:i,multiplyVec4:j,transposeMatrix:k};e.exports=a}),null);
__d("Quaternions",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[0,0,0,1],d=Math.sin(b/2);c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=Math.cos(b/2);return c}function b(a,b,c){var d=[0,0,0,1],e=Math.cos(a/2),f=Math.cos(c/2),g=Math.cos(b/2);a=Math.sin(a/2);c=Math.sin(c/2);b=Math.sin(b/2);d[0]=a*f*g-e*c*b;d[1]=e*f*b+a*c*g;d[2]=e*c*g-a*e*b;d[3]=e*f*g+a*c*b;return d}function c(a){var b=Math.atan2(2*(a[3]*a[0]+a[1]*a[2]),1-2*(a[0]*a[0]+a[1]*a[1])),c=Math.asin(2*(a[3]*a[1]-a[2]*a[0]));a=Math.atan2(2*(a[3]*a[2]+a[0]*a[1]),1-2*(a[1]*a[1]+a[2]*a[2]));return[b,c,a]}function d(a,b){var c=[0,0,0,1];c[0]=b[3]*a[0]+b[0]*a[3]+b[1]*a[2]-b[2]*a[1];c[1]=b[3]*a[1]-b[0]*a[2]+b[1]*a[3]+b[2]*a[0];c[2]=b[3]*a[2]+b[0]*a[1]-b[1]*a[0]+b[2]*a[3];c[3]=b[3]*a[3]-b[0]*a[0]-b[1]*a[1]-b[2]*a[2];return c}f={multiply:d,quaternionFromAxisAngle:a,quaternionFromTaitBryan:b,taitBryanFromQuaternion:c};e.exports=f}),null);
__d("createWebGLTiledCubemapTileProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g="\nattribute vec3 a_position;\nattribute vec3 a_color;\nattribute vec2 a_texcoord;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nuniform vec2 u_uvOffset;\nuniform float u_uvScale;\nuniform vec2 u_uvOffsetBackground;\nuniform float u_uvScaleBackground;\n\nvarying vec4 v_worldPosition;\nvarying vec2 v_texcoord;\nvarying vec2 v_backgroundTexcoord;\nvarying vec3 v_color;\n\nvoid main() {\n  v_texcoord = a_texcoord * u_uvScale + u_uvOffset;\n  v_backgroundTexcoord = a_texcoord * u_uvScaleBackground + u_uvOffsetBackground;\n  v_worldPosition = modelMatrix * vec4(a_position, 1.0);\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n}\n",h="\nprecision mediump float;\n\nvarying vec4 v_worldPosition;\nvarying vec2 v_texcoord;\nvarying vec2 v_backgroundTexcoord;\n\nuniform sampler2D u_tileTexture;\nuniform sampler2D u_backgroundTexture;\nuniform vec2 u_horizontalAngleBounds;\nuniform vec2 u_verticalAngleBounds;\n\nvoid main() {\n  // Use the world position of the fragment to compute where it lies\n  // in terms of horizontal and vertical angles.\n  float hAngle = atan(v_worldPosition.x, -1.0 * v_worldPosition.z);\n  float vAngle = atan(v_worldPosition.y, sqrt(v_worldPosition.x * v_worldPosition.x + v_worldPosition.z * v_worldPosition.z));\n\n  // If this fragment is out of bounds, use the color of the background texture\n  // which is the Level 0 face texture. Otherwise, use the color of the texture\n  // given to be displayed.\n  if (hAngle > u_horizontalAngleBounds.x &&\n      hAngle < u_horizontalAngleBounds.y &&\n      vAngle > u_verticalAngleBounds.x &&\n      vAngle < u_verticalAngleBounds.y) {\n    gl_FragColor = texture2D(u_tileTexture, v_texcoord);\n  } else {\n    gl_FragColor = texture2D(u_backgroundTexture, v_backgroundTexcoord);\n  }\n}\n";function a(a){var c=new(b("CometWebGLProgram"))(a);return c.addShader(g,a.VERTEX_SHADER).addShader(h,a.FRAGMENT_SHADER).compile()}}),null);
__d("CometWebGLCubemapTileMesh",["CometWebGLMesh","Matrices","Quaternions","createWebGLTiledCubemapTileProgram","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g={MINUS_X:0,MINUS_Y:5,MINUS_Z:1,PLUS_X:2,PLUS_Y:4,PLUS_Z:3},h=1;a=function(){function a(a,c,d,e,f){this.$1=a;this.$3=c;this.$5=d;this.$2=new(b("CometWebGLMesh"))(a,b("createWebGLTiledCubemapTileProgram")(a),{interleaved:!1});this.$2.addAttribute("a_position",{offset:0});this.$2.addAttribute("a_texcoord",{offset:48});c=[1,1,-.5,0,1,-.5,0,0,-.5,1,0,-.5,1,1,0,1,0,0,1,0];this.$2.bufferData(c);this.$2.bufferIndex([0,1,2,2,3,0]);d=1/Math.pow(2,this.$3.level);a=b("Matrices").createScalingMatrix(d,d,1);c=this.$6(this.$3.face);d=this.$7(this.$3.level,this.$3.col,this.$3.row);a=b("Matrices").multiplyMat4(b("Matrices").multiplyMat4(a,d),c);this.$4=a;this.$2.setUniform("modelMatrix",this.$4);this.$2.setUniform("u_horizontalAngleBounds",[].concat(e));this.$2.setUniform("u_verticalAngleBounds",[].concat(f))}var c=a.prototype;c.draw=function(a,b){this.$2.setUniform("viewMatrix",a);this.$2.setUniform("projectionMatrix",b);a=this.$5.getBestTileTexture(this.$3);b=a[0];a=a[1];a=this.$8(a);var c=a[0];a=a[1];this.$2.setUniform("u_tileTexture",b);this.$2.setUniform("u_uvScale",a);this.$2.setUniform("u_uvOffset",[].concat(c));b={col:0,face:this.$3.face,level:0,row:0};a=this.$5.getBestTileTexture(b);c=a[0];a[1];a=this.$8(b);b=a[0];a=a[1];this.$2.setUniform("u_backgroundTexture",c);this.$2.setUniform("u_uvScaleBackground",a);this.$2.setUniform("u_uvOffsetBackground",[].concat(b));this.$2.program.use();this.$2.draw()};c.$6=function(a){switch(a){case g.PLUS_X:return b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,-Math.PI/2,0));case g.MINUS_X:return b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,Math.PI/2,0));case g.PLUS_Y:return b("Matrices").multiplyMat4(b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,0,Math.PI)),b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(Math.PI/2,0,0)));case g.MINUS_Y:return b("Matrices").multiplyMat4(b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,0,Math.PI)),b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(-Math.PI/2,0,0)));case g.PLUS_Z:return b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,Math.PI,0));case g.MINUS_Z:return b("Matrices").createIdentityMat4();default:throw b("unrecoverableViolation")("Unexpected cube face index: "+a,"immersive_media")}};c.$8=function(a){a=this.$3.level-a.level;if(a===0)return[[0,0],1];a=1/Math.pow(2,a);var b=1*a,c=[b*this.$3.col,b*this.$3.row];c[1]=1-b-c[1];return[c,a]};c.$7=function(a,c,d){a=h/Math.pow(2,a);var e=h/2;c=[c*a,d*a];c[1]=1-a-c[1];d=-e;return b("Matrices").createTranslationMatrix(c[0]+d,c[1]+d,0)};c.$9=function(a){switch(a){case g.PLUS_X:return[1,0,0];case g.MINUS_X:return[.6,0,0];case g.PLUS_Y:return[0,1,0];case g.MINUS_Y:return[0,.6,0];case g.PLUS_Z:return[0,0,1];case g.MINUS_Z:return[0,0,.6];default:throw b("unrecoverableViolation")("Unexpected cube face index: "+a,"immersive_media")}};return a}();e.exports=a}),null);
__d("Comet360PhotoTiledCubemapRenderer",["Promise","Comet360PhotoRenderer","Comet360PhotoTiledCubemapTextureCache","Comet360PhotoTiledCubemapTile","CometWebGLCubemapTileMesh","promiseDone"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e){this.$1=a;this.$3=d;this.$2=c;this.$4=e;this.$6=new(b("Comet360PhotoTiledCubemapTextureCache"))(this.$1);this.$5=new Map();this.$7=!1;a=this.$2.horizontalFov();d=this.$2.verticalFov();this.$8=[-a/2,a/2];this.$9=[-d/2,d/2]}var c=a.prototype;c.initialize=function(){return this.$10()};c.draw=function(){var a=this;if(!this.$7)return;var c=this.$1;c.clear(c.COLOR_BUFFER_BIT);c.enable(c.CULL_FACE);c.cullFace(c.BACK);c=this.$11(1);var d=[],e=function(){if(g){if(h>=f.length)return"break";i=f[h++]}else{h=f.next();if(h.done)return"break";i=h.value}var c=i,e=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(c),j=a.$5.get(e);j==null&&(j=new(b("CometWebGLCubemapTileMesh"))(a.$1,c,a.$6,a.$8,a.$9),a.$5.set(e,j));d.push(j);e=a.$6.hasTexture(c);!e&&!a.$2.isFetchingTileImage(c)&&b("promiseDone")(a.$2.fetchTileImage(c).then(function(b){a.$6.loadTexture(c,b),a.$4(function(){a.draw()})}))};for(var f=c,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;c=e();if(c==="break")break}for(var c=0;c<d.length;c++){e=d[c];e.draw(this.$3.getViewMatrix(),this.$3.getProjectionMatrix())}};c.$11=function(a){var b=Math.pow(2,a),c=[];for(var d=0;d<6;d++)for(var e=0;e<b;e++)for(var f=0;f<b;f++)c.push({col:f,face:d,level:a,row:e});return c};c.$10=function(){var a=this;if(this.$7)return new(b("Promise"))(function(a,b){a()});var c=[],d=function(b){var d={col:0,face:b,level:0,row:0};c.push(a.$2.fetchTileImage(d).then(function(b){a.$6.loadTexture(d,b)}))};for(var e=0;e<6;e++)d(e);return b("Promise").all(c).then(function(){a.$7=!0})};return a}();e.exports=a}),null);
__d("Comet360SphericalMediaHeadingIndicatorOverlay.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h={arcRadius:6.3,arcStroke:5.3,backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundRadius:17.5,centerRadius:2,elementColor:"rgba(255, 255, 255, 0.85)",height:35,innerRadius:12,innerStroke:1,partialPanoElementColor:"rgba(255, 255, 255, 0.6)",rimRadius:16.8,rimStroke:1.4,triangle:[2,2.5,5.2],width:35};function i(){return Math.max(window.devicePixelRatio||1,1)}function j(){var a=i();return{height:h.height*a,width:h.width*a}}function k(){var a=j();return{x:a.width/2,y:a.height/2}}var l=function(a,b,c,d){a.beginPath(),a.arc(b.x,b.y,c*i(),0,2*Math.PI,!1),a.fillStyle=d,a.lineWidth=0,a.fill()},m=function(a,b,c,d,e,f,g){var h=i();a.beginPath();a.arc(b.x,b.y,c*h,d,e,!1);a.lineWidth=f*h;a.strokeStyle=g;a.stroke()};function n(a){var b=k(),c=i(),d=h.triangle[0]*c,e=h.triangle[1]*c;c=h.triangle[2]*c;a.translate(b.x,b.y);a.beginPath();a.moveTo(0,d-b.y);a.lineTo(-e,c-b.y);a.lineTo(e,c-b.y);a.fillStyle=h.elementColor;a.fill()}function o(a,b,c,d){var e=k();l(a,e,h.backgroundRadius,h.backgroundColor);l(a,e,h.centerRadius,h.elementColor);m(a,e,h.innerRadius,0,2*Math.PI,h.innerStroke,h.partialPanoElementColor);b=b/2;m(a,e,h.innerRadius,c+d-b,c+d+b,h.innerStroke,h.elementColor)}function p(a,b,c,d,e){c=c-d;d=b/2;m(a,k(),h.arcRadius,e+c-d,e+c+d,h.arcStroke,h.elementColor)}function a(a){var b=a.currentHeading,c=a.initialHeading,d=c===void 0?0:c;c=a.isVisible;c=c===void 0?!0:c;var e=a.maximumHorizontalFov,f=a.poiHeading,h=f===void 0?1.5*Math.PI:f,i=a.viewerHorizontalFov,k=g.useRef(null);g.useLayoutEffect(function(){var a=k.current;if(a==null)return;var c=j();(a.width!==c.width||a.height!==c.height)&&(a.width=c.width,a.height=c.height);a=a.getContext("2d");if(!a)return;a.save();a.clearRect(0,0,c.width,c.height);o(a,e,h,d);p(a,i,h,d,b);n(a);a.restore()},[b,d,e,h,i]);return g.jsx("div",{className:"t4m6vmga e4zzj2sf art1omkt jowmb856 py2didcb rk01pc8j pmk7jnqg hzruof5a afyhebng n7fi1qx3"+(c?"":" b5wmifdl"),children:g.jsx("canvas",{className:"k4urcfbm datstx6m",ref:k})})}}),null);
__d("LazyMat4",["Matrices"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=!0,this.$1=b("Matrices").createIdentityMat4(),this.$3=a}var c=a.prototype;c.value=function(){this.$2&&(this.$1=this.$3(),this.$2=!1);return[].concat(this.$1)};c.markDirty=function(){this.$2=!0};return a}();e.exports=a}),null);
__d("CometWebGLCamera",["LazyMat4","Matrices","Quaternions"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e){var f=this;this.$1=a;this.$2=c;this.$3=d;this.$4=e;this.$6=[0,0,0,1];this.$5=[0,0,0];this.$7=new(b("LazyMat4"))(function(){var a,c=(a=b("Matrices")).createRotationMatrixFromQuaternion(f.$6),d=a.createTranslationMatrixFromVec(f.$5);c=a.multiplyMat4(c,d);return a.invertMat4(c)});this.$8=new(b("LazyMat4"))(function(){return b("Matrices").createPerspectiveProjectionMatrix(f.$1,f.$2,f.$3,f.$4)});this.$9=new(b("LazyMat4"))(function(){var a=b("Matrices").multiplyMat4(f.$7.value(),f.$8.value());return b("Matrices").invertMat4(a)})}var c=a.prototype;c.getViewMatrix=function(){return this.$7.value()};c.getProjectionMatrix=function(){return this.$8.value()};c.getInvertedViewProjectionMatrix=function(){return this.$9.value()};c.getRotation=function(){return[].concat(this.$6)};c.setRotation=function(a){this.$6=[].concat(a);this.$7.markDirty();this.$9.markDirty();return this};c.getPosition=function(){return[].concat(this.$5)};c.setPosition=function(a){this.$5=a;this.$7.markDirty();this.$9.markDirty();return this};c.getAspectRatio=function(){return this.$2};c.setAspectRatio=function(a){this.$2=a;this.$8.markDirty();this.$9.markDirty();return this};c.getHorizontalFov=function(){return a.computeHorizontalFov(this.$2,this.$1)};c.getVerticalFov=function(){return this.$1};c.setVerticalFov=function(a){this.$1=a;this.$8.markDirty();this.$9.markDirty();return this};c.translate=function(a,c,d,e){e===void 0&&(e=!0);a=[a,c,d,0];if(!e){c=b("Matrices").createRotationMatrixFromQuaternion(this.$6);a=b("Matrices").multiplyVec4(a,c)}this.$5=[this.$5[0]+a[0],this.$5[1]+a[1],this.$5[2]+a[2]];this.$7.markDirty();this.$9.markDirty();return this};c.rotate=function(a){this.$6=b("Quaternions").multiply(this.$6,a);this.$7.markDirty();this.$9.markDirty();return this};a.computeHorizontalFov=function(a,b){return 2*Math.atan(Math.tan(b/2)*a)};a.computeVerticalFov=function(a,b){return 2*Math.atan(Math.tan(b/2)/a)};return a}();e.exports=a}),null);
__d("PanEventListenerWrapper.react",["React","VideoPlayerPointerDrag"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=5;function a(a){var c=a.onPan,d=a.onPanEnd,e=a.onPanStart,f=a.onPress,i=g.useRef(0),j=g.useRef(null),k=g.useRef(null),l=g.useCallback(function(a){i.current=0,j.current=a.clientX,k.current=a.clientY,e!=null&&e()},[i,j,k,e]),m=g.useCallback(function(a){if(j.current!=null&&k.current!=null){var b=a.clientX-j.current,d=a.clientY-k.current,e=Math.sqrt(b*b+d*d);i.current+=e;c!=null&&c(b,d)}j.current=a.clientX;k.current=a.clientY},[i,j,k,c]),n=g.useCallback(function(){i.current<h&&(f!=null&&f()),d!=null&&d()},[f,d]);n=b("VideoPlayerPointerDrag").usePointerDrag({onDragCancel:n,onDragEnd:n,onDragMove:m,onDragStart:l});m=n.rootProps;return g.jsx("div",babelHelpers["extends"]({},m,{children:a.children}))}}),null);
__d("useFrameTiming",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=g.useRef(null),b=g.useRef(null),c=g.useCallback(function(a){var c=b.current;if(c==null)return;c(a)},[]),d=g.useCallback(function(d){var e=a.current;e!=null&&window.cancelAnimationFrame(e);b.current=d;a.current=window.requestAnimationFrame(c)},[c]),e=g.useCallback(function(){var b=a.current;if(b==null)return;window.cancelAnimationFrame(b)},[]);g.useEffect(function(){return function(){var b=a.current;if(b==null)return;window.cancelAnimationFrame(b)}},[]);return[d,e]}}),null);
__d("SphericalPhotoPanEventListenerWrapper.react",["PanEventListenerWrapper.react","React","useFrameTiming"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=.95,i=.001,j=1;function a(a){var c=a.children,d=a.disableMomentum,e=a.onPan;a=a.onPress;var f=g.useRef(0),k=g.useRef(0),l=g.useRef(0),m=g.useRef(0),n=b("useFrameTiming")(),o=n[0],p=n[1],q=g.useCallback(function(){f.current*=h,k.current*=h,e(f.current,k.current),(Math.abs(f.current)>i||Math.abs(k.current)>i)&&o(q)},[f,k,e,o]);n=g.useCallback(function(a,b){p(),l.current=a,m.current=b,e(a,b)},[p,e,l,m]);var r=g.useCallback(function(){p()},[p]),s=g.useCallback(function(){var a=function(a){return Math.abs(a)>j?a:0};f.current=a(l.current||0);k.current=a(m.current||0);d!==!0&&o(q)},[d,o,q]);return g.jsx(b("PanEventListenerWrapper.react"),{onPan:n,onPanEnd:s,onPanStart:r,onPress:a,children:c})}}),null);
__d("useGLContext",["React","WebPixelRatio","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,c,d){var e=g.useState(null),f=e[0],h=e[1],i=(e=d==null?void 0:d.expand)!=null?e:!1;g.useEffect(function(){var a=document.createElement("canvas"),c=a.getContext("webgl");if(c==null){b("recoverableViolation")("Unable to create WebGL context","webgl");return function(){}}h(c);return function(){try{c.getExtension("WEBGL_lose_context").loseContext()}catch(a){b("recoverableViolation")("Failed to clean up WebGL context","webgl",{error:a})}}},[]);g.useEffect(function(){if(f==null)return;var d=f.canvas,e=b("WebPixelRatio").get(),g=a*e;e=c*e;d.width=g;d.height=e;f.viewport(0,0,g,e);d.style.width=i?"100%":a+"px"},[f,a,c,i]);d=g.useCallback(function(a){if(f==null)return;var b=f.canvas,c=b.parentNode;c!=null&&c.removeChild(b);a!=null&&a.appendChild(b)},[f]);return[f,d]}}),null);
__d("Comet360PhotoViewer.react",["fbt","Comet360PhotoSphericalRenderer","Comet360PhotoTiledCubemapRenderer","Comet360PhotoTypes","Comet360SphericalMediaHeadingIndicatorOverlay.react","CometFeedStoryImmersiveMediaMouseOverlay.react","CometWebGLCamera","Quaternions","React","SphericalPhotoPanEventListenerWrapper.react","clearTimeout","mergeRefs","promiseDone","recoverableViolation","setTimeout","useFrameTiming","useGLContext","useThrottled","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=Math.PI/2,j=.1,k=100,l=1.527163;function a(a){var c=a.disableMomentum,d=a.fallbackElement,e=a.height,f=a.onCameraViewChange,m=a.onLoad,n=a.onPress,o=a.photoEncoding,p=a.width,q=p/e,r=h.useMemo(function(){if(o.startingView.verticalFov!=null)return o.startingView.verticalFov;return o.startingView.horizontalFov!=null?b("CometWebGLCamera").computeVerticalFov(q,o.startingView.horizontalFov):l},[o.startingView.verticalFov,o.startingView.horizontalFov,q]),s=h.useMemo(function(){var a;return(a=o.startingView.horizontalFov)!=null?a:b("CometWebGLCamera").computeHorizontalFov(q,r)},[o.startingView.horizontalFov,q,r]),t=h.useRef(2*Math.PI-o.startingView.heading),u=h.useRef(o.startingView.pitch),v=h.useRef(t.current),w=h.useState(v.current),x=w[0],y=w[1];w=h.useState(!0);var z=w[0],A=w[1];w=h.useState(!1);var B=w[0],C=w[1],D=h.useRef(null);w=b("useGLContext")(p,e,{expand:!0});var E=w[0],F=w[1],G=h.useRef([0,0]),H=h.useRef(0);w=b("useFrameTiming")();var I=w[0],J=h.useMemo(function(){return new(b("CometWebGLCamera"))(r,q,j,k)},[r,q]),K=h.useMemo(function(){if(E==null)return null;switch(o.projectionType){case b("Comet360PhotoTypes").Comet360PhotoProjection.TiledCubemap:var a=o.tiledCubemapDataProvider;if(a==null){b("recoverableViolation")("Data provider for tiled cubemap renderer was not set","immersive_media");return null}return new(b("Comet360PhotoTiledCubemapRenderer"))(E,a,J,I);case b("Comet360PhotoTypes").Comet360PhotoProjection.Cylindrical:case b("Comet360PhotoTypes").Comet360PhotoProjection.Equirectangular:a=o.sphericalDataProvider;if(a==null){b("recoverableViolation")("Data provider for spherical renderer was not set","immersive_media");return null}return new(b("Comet360PhotoSphericalRenderer"))(E,a,J,I)}},[E,J,o,I]),L=h.useCallback(function(){if(K==null)return;K.draw()},[K]),M=function(){b("clearTimeout")(D.current),D.current=b("setTimeout")(function(){C(!0)},3e3)};w=function(){B&&C(!1),M()};var N=b("useThrottled")(w,100),O=b("useVisibilityObserver")({onVisible:function(){M()}});w=h.useMemo(function(){return b("mergeRefs")(F,O)},[F,O]);h.useEffect(function(){return function(){b("clearTimeout")(D.current)}},[]);var P=h.useCallback(function(){if(E==null)return;var a=E.canvas,b=0,c=0;while(a!=null)b+=a instanceof HTMLElement?a.offsetLeft:0,c+=a instanceof HTMLElement?a.offsetTop:0,a=a instanceof HTMLElement?a.offsetParent:null;G.current=[b,c]},[G,E]),Q=h.useMemo(function(){return[p/2/Math.tan(s/2),e/2/Math.tan(r/2)]},[e,s,r,p]),R=Q[0],S=Q[1],T=h.useCallback(function(a,c){if(a===0&&c===0)return;t.current+=Math.atan(a/R);u.current+=Math.atan(c/S);u.current>i&&(u.current=i);u.current<-i&&(u.current=-i);a=b("Quaternions").quaternionFromTaitBryan(u.current,t.current,0);c=v.current-(t.current-v.current);y(c);f&&f(c,u.current,r);J.setRotation(a);I(function(){L()})},[J,L,f,R,S,I,r]);Q=h.useCallback(function(a,b){N(),T(a,b)},[T,N]);var U=h.useCallback(function(){var a;if(E==null)return;P();var b=window.innerHeight,c=E.canvas.clientHeight;b=b+c;a=G.current[1]-((a=(a=document.scrollingElement)==null?void 0:a.scrollTop)!=null?a:0)+c;c=a/b;a=c-H.current;H.current=c;if(c<0||c>1)return;T(-a*R,0)},[G,E,P,T,R]);h.useEffect(function(){document.addEventListener("scroll",U);var a=!0;if(K==null)return;b("promiseDone")(K.initialize().then(function(){if(!a)return;var c=b("Quaternions").quaternionFromTaitBryan(u.current,t.current,0);J.setRotation(c);I(function(){L()});A(!1);m&&m()}));return function(){a=!1,document.removeEventListener("scroll",U)}},[J,K,L,m,U,I]);return h.jsxs(b("SphericalPhotoPanEventListenerWrapper.react"),{disableMomentum:c,onPan:Q,onPress:n,children:[h.jsx("div",{ref:w,style:{display:z?"none":"block",lineHeight:0}}),z?d:null,h.jsx(b("CometFeedStoryImmersiveMediaMouseOverlay.react"),{descriptionFbt:g._("Haz clic y arrastra para mirar alrededor"),isActive:B,showClick:!0}),h.jsx(b("Comet360SphericalMediaHeadingIndicatorOverlay.react"),{currentHeading:x,initialHeading:v.current,isVisible:!z,maximumHorizontalFov:a.photoEncoding.horizontalFov,viewerHorizontalFov:r})]})}}),null);
__d("createWebGL3DPhotoProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g="\nattribute vec3 a_position;\nattribute vec2 a_texcoord_0;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec2 v_texcoord_0;\n\nvoid main() {\n  v_texcoord_0 = a_texcoord_0;\n  gl_Position = projectionMatrix * viewMatrix * vec4(a_position, 1.0);\n}\n",h="\nprecision mediump float;\n\nvarying vec2 v_texcoord_0;\nuniform sampler2D u_texture_0;\n\nvoid main() {\n  gl_FragColor = texture2D(u_texture_0, v_texcoord_0);\n}\n";function a(a){var c=new(b("CometWebGLProgram"))(a);return c.addShader(g,a.VERTEX_SHADER).addShader(h,a.FRAGMENT_SHADER).compile().setUniformDefaults({projectionMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],viewMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]})}}),null);
__d("createMeshesFromGLTF",["Promise","CometWebGLMesh","CometWebGLTexture","createWebGL3DPhotoProgram"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g={POSITION:"a_position",TEXCOORD_0:"a_texcoord_0"};function a(a,c){var d=[],e=b("createWebGL3DPhotoProgram")(a),f=[],i=c.getMeshes();for(var i=i,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}l=l;l=l.primitives;for(var l=l,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}o=o;var p=o.attributes,q=[],r=Infinity,s=0;p=Object.entries(p);for(var t=0;t<p.length;t++){var u=p[t],v=u[0];u=u[1];if(typeof u==="number"){u=c.getAccessor(u);var w=c.getBufferView(u.bufferView);w.byteOffset<r&&(r=w.byteOffset);w.byteOffset+w.byteLength>s&&(s=w.byteOffset+w.byteLength);u=u.byteOffset!=null?u.byteOffset:0;q.push({byteOffset:w.byteOffset+u,name:v})}}q.sort(h);var x=new(b("CometWebGLMesh"))(a,e,{interleaved:!1});w=c.getBinarySource();for(var u=0;u<q.length;u++){v=q[u];if(v.name in g){p=v.byteOffset-r;t={offset:p};x.addAttribute(g[v.name],t)}}x.bufferData(new Float32Array(w.buffer,w.byteOffset+r,(s-r)/4));o.indices!=null&&x.bufferIndex(c.getDataViewForAccessor(o.indices));if(o.material!=null){p=c.getMaterial(o.material);var y=p==null?void 0:(v=p.pbrMetallicRoughness)==null?void 0:(t=v.baseColorTexture)==null?void 0:t.index;y!=null&&(function(){var d=c.getTexture(y),e=c.getImage(d.source),g=new(b("CometWebGLTexture"))(a);f.push(new(b("Promise"))(function(a,b){e.onload=function(){g.setSource(e),a()},e.onerror=function(){b()}}));x.setUniform("u_texture_0",g)})()}d.push(x)}}return b("Promise").all(f).then(function(){return d})}function h(a,b){return a.byteOffset-b.byteOffset}}),null);
__d("glVec3CrossProduct",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}}),null);
__d("glMatrixLookingAtTarget",["glVec3CrossProduct"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){c=[a[0]-c[0],a[1]-c[1],a[2]-c[2]];var d=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=d;c[1]/=d;c[2]/=d;d=b("glVec3CrossProduct")([0,1,0],c);var e=b("glVec3CrossProduct")(c,d);return[d[0],d[1],d[2],0,e[0],e[1],e[2],0,c[0],c[1],c[2],0,a[0],a[1],a[2],1]}}),null);
__d("GLTFResource",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=[],this.$2=[],this.$3=null,this.$4=null,this.$5=[],this.$6=[],this.$7=[],this.$8=[]}var c=a.prototype;c.addBinarySource=function(a,b,c){this.$3=new Uint8Array(a,b,c)};c.useJSON=function(a){var b;this.$4=(b=a.extras)!=null?b:Object.freeze({});this.$1=(b=a.accessors)!=null?b:[];this.$2=(b=a.bufferViews)!=null?b:[];this.$5=(b=a.images)!=null?b:[];this.$6=(b=a.materials)!=null?b:[];this.$7=(b=a.meshes)!=null?b:[];this.$8=(b=a.textures)!=null?b:[]};c.getBinarySource=function(){if(this.$3==null)throw b("unrecoverableViolation")("attempted to access binary source before it was set","webgl");return this.$3};c.hasBinarySource=function(){return this.$3!=null};c.getAccessor=function(a){a=this.$1[a];if(a==null)throw new(b("unrecoverableViolation"))("accessor index out of range","webgl");return a};c.getBufferView=function(a){a=this.$2[a];if(a==null)throw new(b("unrecoverableViolation"))("buffer view index out of range","webgl");return a};c.getExtras=function(){return this.$4};c.getMaterial=function(a){a=this.$6[a];if(a==null)throw new(b("unrecoverableViolation"))("material index out of range","webgl");return a};c.getMeshes=function(){return this.$7};c.getTexture=function(a){a=this.$8[a];if(a==null)throw new(b("unrecoverableViolation"))("texture index out of range","webgl");return a};c.getDataViewForAccessor=function(a){a=this.$1[a];if(a==null)throw new(b("unrecoverableViolation"))("accessor index out of range","webgl");var c=this.$2[a.bufferView];if(c==null)throw new(b("unrecoverableViolation"))("buffer view index out of range","webgl");if(c.buffer!==0)throw new(b("unrecoverableViolation"))("external gltf buffers are not currently supported","webgl");var d=this.$3;if(d==null)throw new(b("unrecoverableViolation"))("attempted to get an accessor before loading binary data","webgl");var e=d.byteOffset+c.byteOffset;switch(a.componentType){case 5120:return new Int8Array(d.buffer,e,c.byteLength);case 5121:return new Uint8Array(d.buffer,e,c.byteLength);case 5122:return new Int16Array(d.buffer,e,c.byteLength/2);case 5123:return new Uint16Array(d.buffer,e,c.byteLength/2);case 5124:return new Int32Array(d.buffer,e,c.byteLength/4);case 5125:return new Uint32Array(d.buffer,e,c.byteLength/4);case 5126:return new Float32Array(d.buffer,e,c.byteLength/4);default:throw new(b("unrecoverableViolation"))("unsupported gl component type","webgl")}};c.getImage=function(a){a=this.$5[a];var b=this.getBufferView(a.bufferView),c=this.getBinarySource();c=new Uint8Array(c.buffer,c.byteOffset+b.byteOffset,b.byteLength);b=new Blob([c],{type:a.mimeType});c=URL.createObjectURL(b);a=new Image();a.src=c;return a};return a}();e.exports=a}),null);
__d("GLTFTypesValidator",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.throwBadFormat=g;f.validateAccessor=h;f.validateAccessors=i;f.validateArray=j;f.validateBoolean=a;f.validateBuffer=k;f.validateBufferView=l;f.validateBufferViews=m;f.validateBuffers=n;f.validateExtras=o;f.validateGLTFBodyJSON=c;f.validateImage=p;f.validateImages=q;f.validateInteger=r;f.validateMaterial=s;f.validateMaterials=t;f.validateMesh=u;f.validateMeshes=v;f.validatePrimitive=w;f.validatePrimitives=x;f.validateString=y;f.validateTexture=z;f.validateTextures=A;function g(a){throw new(b("unrecoverableViolation"))("unrecoverable incorrectly formatted JSON ".concat(a),"webgl")}function h(a){a===void 0&&g("GLTFAccessor undefined"),r(a.bufferView,!0,"GLTFAccessor.bufferView",0),r(a.byteOffset,!1,"GLTFAccessor.byteOffset",0),r(a.componentType,!0,"GLTFAccessor.componentType",5120,5126),r(a.count,!0,"GLTFAccessor.count",1),a.type!==void 0&&(a.type!=="SCALAR"&&a.type!=="VEC2"&&a.type!=="VEC3"&&a.type!=="VEC4"&&g("GLTFAccessor malformed"))}function i(a){j(a,!0,"GLTFAccessor");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;h(d)}}function j(a,b,c){if(a===void 0)if(b)g("Array<".concat(c).concat("> undefined"));else return;else a.length===0&&g("Array<".concat(c).concat("> length=0"))}function a(a,b,c){if(a===void 0)if(b)g(c.concat(" undefined"));else return;typeof a!=="boolean"&&g(c.concat(" not a boolean"))}function k(a){a===void 0&&g("GLTFBuffer undefined"),r(a.byteLength,!0,"GLTFBuffer.byteLength",1)}function l(a){r(a.buffer,!0,"GLTFBufferView.buffer",0),r(a.byteOffset,!0,"GLTFBufferView.byteOffset",0),r(a.byteLength,!0,"GLTFBufferView.byteLength",0)}function m(a){j(a,!1,"GLTFBufferView");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;l(d)}}function n(a){j(a,!1,"GLTFBuffer");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;k(d)}}function o(a){a!==void 0&&(a.FB_PHOTO_3D_DATA!==void 0?(a.FB_PHOTO_3D_DATA.hFov!==void 0&&r(a.FB_PHOTO_3D_DATA.hFov,!1,"GLTFExtras.FB_PHOTO_3D_DATA.hFov"),a.FB_PHOTO_3D_DATA.vFov!==void 0&&r(a.FB_PHOTO_3D_DATA.vFov,!1,"GLTFExtras.FB_PHOTO_3D_DATA.vFov")):g("GLTFExtras undefined"))}function c(a){a!==void 0?(i(a.accessors),n(a.buffers),m(a.bufferViews),o(a.extras),q(a.images),t(a.materials),v(a.meshes),A(a.textures)):g("GLTFBody undefined")}function p(a){a===void 0&&g("GLTFImage undefined"),y(a.mimeType,!0,"GLTFImage.mimeType"),r(a.bufferView,!0,"GLTFImage.bufferView",0)}function q(a){j(a,!1,"GLTFImage");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;p(d)}}function r(a,b,c,d,e){d===void 0&&(d=Number.MIN_SAFE_INTEGER);e===void 0&&(e=Number.MAX_SAFE_INTEGER);if(a===void 0)if(b)g(c.concat(" undefined"));else return;typeof a==="number"?(a<d||a>e)&&g(c.concat(" out of range")):g(c.concat(" not an integer"))}function s(a){a===void 0&&g("GLTFMaterial undefined"),a.pbrMetallicRoughness!==void 0&&(a.pbrMetallicRoughness.baseColorTexture!==void 0&&r(a.pbrMetallicRoughness.baseColorTexture.index,!1,"GLTFMaterial.pbrMetallicRoughness.baseColorTexture.index",0))}function t(a){j(a,!1,"GLTFMaterial");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;s(d)}}function u(a){a===void 0&&g("GLTFMesh undefined"),x(a.primitives)}function v(a){j(a,!0,"GLTFMesh");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;u(d)}}function w(a){a===void 0&&g("GLTFPrimitive undefined");for(var b in a.attributes)Object.prototype.hasOwnProperty.call(a.attributes,b)&&(b==="POSITION"||b==="TEXCOORD_0"||b==="TEXCOORD_1"?r(a.attributes[b],!0,"GLTFPrimitives.attributes[".concat(b).concat("]"),0):g("GLTFPrimitive malformed"));r(a.indices,!1,"GLTFPrimitives.indicies",0);r(a.material,!1,"GLTFPrimitives.material",0)}function x(a){a===void 0&&g("GLTFPrimatives undefined");j(a,!0,"GLTFPrimitive");for(var b=0;b<a.length;b++){var c=a[b];w(c)}}function y(a,b,c){if(a===void 0)if(b)g(c.concat(" undefined"));else return;typeof a!=="string"&&g(c.concat(" not a string"))}function z(a){a===void 0&&g("GLTFTexture undefined"),r(a.sampler,!0,"GLTFTexture.sampler",0),r(a.source,!0,"GLTFTexture.source",0)}function A(a){j(a,!0,"GLTFTexture");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;z(d)}}}),null);
__d("parseGLBResource",["GLTFResource","GLTFTypesValidator","extractUTF8StringFromBuffer","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=1179937895;function a(a){var c=new DataView(a);if(c.getUint32(0,!0)!==g)throw new(b("unrecoverableViolation"))("invalid GLB magic number","webgl");if(c.getUint32(4,!0)!==2)throw new(b("unrecoverableViolation"))("unsupported GLB version number","webgl");var d=c.getUint32(8,!0);if(d>a.byteLength)throw new(b("unrecoverableViolation"))("glb buffer is shorter than declared byte length","webgl");var e=new(b("GLTFResource"))(),f=12;while(f<d){var h=c.getUint32(f,!0),i=c.getUint32(f+4,!0);switch(i){case 1313821514:i=b("extractUTF8StringFromBuffer")(a,f+8,h);var j="";try{j=JSON.parse(i)}catch(a){throw new(b("unrecoverableViolation"))("failed to parse glTF JSON","webgl",a)}b("GLTFTypesValidator").validateGLTFBodyJSON(j);e.useJSON(j);break;case 5130562:e.addBinarySource(a,f+8,h);break;default:throw new(b("unrecoverableViolation"))("unexpected GLB section label","webgl")}f+=h+8}return e}}),null);
__d("useGLBLoadAndParse",["React","parseGLBResource","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=g.useState(null),d=c[0],e=c[1];g.useEffect(function(){var c=!1;b("promiseDone")(window.fetch(a).then(function(a){return a.arrayBuffer()}).then(function(a){if(c)return;a=b("parseGLBResource")(a);e(a)})["catch"](function(){e(null)}));return function(){c=!0}},[a]);return d}}),null);
__d("useGLTFDerivedFOV",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=1,i=.508015513,j=.666488587,k=.925,l=Object.freeze({landscape:-.14,portrait:-.124}),m=Object.freeze({landscape:-.124,portrait:-.112}),n=Object.freeze({landscape:.96,portrait:.8}),o=Object.freeze({landscape:.6,portrait:.7});function a(a){var b=g.useMemo(function(){var b;b=(b=a==null?void 0:(b=a.getExtras())==null?void 0:(b=b.FB_PHOTO_3D_DATA)==null?void 0:b.vFov)!=null?b:j;return b*k},[a]),c=g.useMemo(function(){var b;b=(b=a==null?void 0:(b=a.getExtras())==null?void 0:(b=b.FB_PHOTO_3D_DATA)==null?void 0:b.hFov)!=null?b:i;return b*k},[a]),d=g.useMemo(function(){var a=.1,d=1e3,e=1/Math.tan(b/2),f=c/b;return[e/f,0,0,0,0,e,0,0,0,0,(a+d)/(a-d),-1,0,0,a*d*2/(a-d),0]},[c,b]),e=g.useMemo(function(){var a=c>b?"landscape":"portrait",d=l[a],e=m[a];return[Math.tan(c/2)*h*d,Math.tan(b/2)*h*e,1-n[a],o[a]]},[c,b]),f=e[0],p=e[1],q=e[2];e=e[3];return{hFov:c,maxHorizontalAngle:f,maxVerticalAngle:p,projectionMatrix:d,targetInteractionWeightHorizontal:q,targetScrollWeightVertical:e,vFov:b}}}),null);
__d("Comet3DPhotoViewer.react",["fbt","CometFeedStoryImmersiveMediaMouseOverlay.react","CometLazyPopoverTrigger.react","ConstUriUtils","JSResourceForInteraction","Matrices","React","UserAgent","clearTimeout","createMeshesFromGLTF","gkx","glMatrixLookingAtTarget","mergeRefs","promiseDone","setTimeout","stylex","useFrameTiming","useGLBLoadAndParse","useGLContext","useGLTFDerivedFOV","useThrottled","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("JSResourceForInteraction")("CometFeedStory3DPhotoContextMenu.react").__setRef("Comet3DPhotoViewer.react"),j=1,k=.01,l=.005,m=.1,n=.06,o=.12;function a(a){var c=a.fallbackURI,d=a.fileURI,e=a.height,f=a.onLoad,p=a.photoID;a=a.width;var q=b("gkx")("678680"),r=h.useState(!1),s=r[0],t=r[1],u=h.useRef(null);r=b("useGLContext")(a,e,{expand:!0});var v=r[0],w=r[1];a=b("useFrameTiming")();var x=a[0],y=b("useGLBLoadAndParse")(d);e=h.useState([]);var z=e[0],A=e[1];h.useEffect(function(){if(v==null||y==null)return;var a=!1;b("promiseDone")(b("createMeshesFromGLTF")(v,y).then(function(b){if(a)return;A(b);f&&f()}));return function(){a=!0}},[v,y,f]);r=b("useGLTFDerivedFOV")(y);var B=r.hFov,C=r.maxHorizontalAngle,D=r.maxVerticalAngle,E=r.projectionMatrix,F=r.targetInteractionWeightHorizontal,G=r.targetScrollWeightVertical,H=r.vFov,I=h.useCallback(function(){if(v==null||z.length===0)return;v.enable(v.DEPTH_TEST);v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT);v.enable(v.BLEND);v.blendFunc(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA);for(var a=z,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.program.use();d.draw()}},[z,v]),J=function(){b("clearTimeout")(u.current),u.current=b("setTimeout")(function(){t(!0)},3e3)};a=function(){s&&t(!1),J()};var K=b("useThrottled")(a,100),L=b("useVisibilityObserver")({onVisible:function(){b("clearTimeout")(u.current),u.current=b("setTimeout")(function(){t(!0)},3e3)}});e=h.useMemo(function(){return b("mergeRefs")(w,L)},[w,L]);h.useEffect(function(){return function(){b("clearTimeout")(u.current)}},[]);var M=h.useRef([0,0]),N=h.useRef(1),O=h.useRef(1),P=h.useRef([0,0]),Q=h.useRef([0,0]),R=h.useRef(0),S=h.useCallback(function(a){if(v==null)return;if(a!=null){if(R.current!==0){var c=Math.min(a-R.current,50);c=Math.max(Math.min(l*c,1),0);var d=P.current,e=d[0];d=d[1];var f=Q.current,g=f[0];f=f[1];Q.current=[g+c*(e-g),f+c*(d-f)];g=N.current;f=O.current;O.current=f+c*(g-f);(Math.abs(Q.current[0]-e)>k||Math.abs(Q.current[1]-d)>k||Math.abs(O.current-g)>k)&&x(S)}R.current=a}c=O.current;f=H*o*(2*c-1);e=(1-2*c)*D;d=Q.current;g=d[0];a=d[1];d=Math.sin(g*Math.PI*.5);g=Math.sin(a*Math.PI*.5);a=H*n*g;var h=B*n*d;d=-d*C;g=-g*D;c=Math.pow(c+.16,3)/(Math.pow(c+.16,3)+Math.pow(1-(c+.16),3))-.9;a=-(a+f);f=-h;h=j-c*m;c=[0+h*Math.cos(a)*Math.sin(f),0+h*Math.sin(a),-j+h*Math.cos(a)*Math.cos(f)];h=[-(F*d),-(e*G+g*(1-G)),-j];a=b("glMatrixLookingAtTarget")(c,h);f=b("Matrices").invertMat4(a);for(var d=z,e=Array.isArray(d),g=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(g>=d.length)break;c=d[g++]}else{g=d.next();if(g.done)break;c=g.value}h=c;h.setUniform("viewMatrix",f);h.setUniform("projectionMatrix",E)}I()},[I,v,B,C,D,z,E,x,F,G,H]),T=h.useCallback(function(){if(v==null)return;var a=v.canvas,b=0,c=0;while(a!=null)b+=a instanceof HTMLElement?a.offsetLeft:0,c+=a instanceof HTMLElement?a.offsetTop:0,a=a instanceof HTMLElement?a.offsetParent:null;M.current=[b,c]},[M,v]),U=h.useCallback(function(){var a;if(v==null)return;T();var b=window.innerHeight,c=v.canvas.clientHeight;b=b+c;a=M.current[1]-((a=(a=document.scrollingElement)==null?void 0:a.scrollTop)!=null?a:0)+c;c=a/b;N.current=c;if(c<0||c>1)return;x(S)},[M,v,x,S,T]);r=h.useCallback(function(a){if(v==null)return;T();var b=a.pageX;a=a.pageY;b=b-M.current[0];a=a-M.current[1];b=2*b/v.canvas.clientWidth-1;a=1-2*a/v.canvas.clientHeight;P.current=[b,a];K();if(b<-1||a<-1||b>1||a>1)return;x(S)},[v,P,x,K,S,T]);h.useEffect(function(){document.addEventListener("scroll",U);S();return function(){document.removeEventListener("scroll",U)}},[S,U]);var V,W;if(p!=null){V=(a=b("ConstUriUtils").getUri("/intern/compphoto/x3d/3dphoto_console"))==null?void 0:(a=a.setDomain("our.intern.facebook.com"))==null?void 0:(a=a.setProtocol("https"))==null?void 0:(a=a.addQueryParam("ent_id",p))==null?void 0:a.toString();W=(a=b("ConstUriUtils").getUri("/intern/compphoto/x3d/"+p+"/depth"))==null?void 0:(p=a.setDomain("our.intern.facebook.com"))==null?void 0:(a=p.setProtocol("https"))==null?void 0:a.toString()}var X=function(a,c){var d=/^a$/i.test(a.target.nodeName||""),e=b("UserAgent").isPlatform("Mac OS X")?a.metaKey:a.ctrlKey;d=!d&&q&&e;d&&(a.preventDefault(),c())},Y=h.jsx("div",{onMouseMove:r,ref:e,children:h.jsx(b("CometFeedStoryImmersiveMediaMouseOverlay.react"),{descriptionFbt:g._("Mueve el mouse para ver la foto en 3D"),isActive:s,showClick:!1})});p=h.jsx(b("CometLazyPopoverTrigger.react"),{popoverProps:{consoleURL:V,depthURL:W,fallbackImgURL:c,fileURL:d},popoverResource:i,children:function(a,b){return h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 i09qtzwb",onContextMenu:function(a){X(a,b)},ref:a,children:Y})}});return q?p:Y}}),null);
__d("Comet360PhotoTiledCubemapDataProvider",["Promise","Comet360PhotoTiledCubemapTile","CometRelay","unrecoverableViolation","Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=g!==void 0?g:g=b("Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql");a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$5=c,this.$3=new Map(),this.$4=new Map(),this.$6=d,this.$7=e}var c=a.prototype;c.maxTileLevel=function(){return this.$5};c.horizontalFov=function(){return this.$6};c.verticalFov=function(){return this.$7};c.isFetchingTileImage=function(a){a=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a);return this.$4.has(a)};c.fetchTileImage=function(a){var c=this,d=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a);if(this.isFetchingTileImage(a)){var e=this.$4.get(d);if(e==null)throw b("unrecoverableViolation")("Data Provider is fetching tile image but promise is null","immersive_media");return e}if(this.$3.has(d))return new(b("Promise"))(function(a,b){a(c.$3.get(d))});e=this.$8(a).then(function(b){return c.$9(a,b).then(function(a){c.$4["delete"](d);return a})});this.$4.set(d,e);return e};c.$9=function(a,c){var d=this,e=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a);return new(b("Promise"))(function(a,b){var d=new Image();d.crossOrigin="anonymous";d.onload=function(){a(d)};c==null?a(null):d.src=c}).then(function(a){d.$3.set(e,a);return a})};c.$8=function(a){return b("CometRelay").fetchQuery(this.$1,h,{id:this.$2,tileInfoList:[a]}).toPromise().then(function(a){a=a==null?void 0:(a=a.node)==null?void 0:a.tiles;return a==null||a[0]==null?null:a[0].uri})};return a}();e.exports=a}),null);
__d("CometRemote360PhotoViewer.react",["Comet360GyroOverlay.react","Comet360PhotoTiledCubemapDataProvider","Comet360PhotoTypes","Comet360PhotoViewer.react","CometRelay","React","clearTimeout","recoverableViolation","setTimeout","stylex","CometRemote360PhotoViewer_photo.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=584;function j(a){return a/180*Math.PI}function a(a){var c,d,e,f,k,l,m,n,o,p=h.useState(!1),q=p[0],r=p[1];p=h.useCallback(function(){r(!0)},[r]);var s=h.useState(null),t=s[0];s=s[1];var u=h.useState(!1),v=u[0],w=u[1],x=h.useRef(null);h.useEffect(function(){x.current=b("setTimeout")(function(){w(!0)},2e3);return function(){x.current!=null&&b("clearTimeout")(x.current)}});u=!v||!q;v=b("CometRelay").useRelayEnvironment();q=b("CometRelay").useFragment(g!==void 0?g:g=b("CometRemote360PhotoViewer_photo.graphql"),a.photo);q=(q=q==null?void 0:q.photo_encodings)!=null?q:[];q=q.find(function(a){return(a==null?void 0:a.projection_type)==="tiled_cubemap"});if(q==null){b("recoverableViolation")("360 photo does not have tile_cubemap encoding","comet_feed");return a.fallback}c=(c=q.max_tile_level)!=null?c:0;d=(d=q.id)!=null?d:0;e=(e=(e=q.spherical_metadata)==null?void 0:e.initial_view_heading_degrees)!=null?e:0;f=(f=(f=q.spherical_metadata)==null?void 0:f.initial_view_pitch_degrees)!=null?f:0;k=(k=(k=q.spherical_metadata)==null?void 0:k.initial_vertical_fov_degrees)!=null?k:0;l=(l=(l=q.spherical_metadata)==null?void 0:l.initial_horizontal_fov_degrees)!=null?l:0;m=(m=(m=q.spherical_metadata)==null?void 0:m.cropped_area_image_width_pixels)!=null?m:0;n=(n=(n=q.spherical_metadata)==null?void 0:n.cropped_area_image_height_pixels)!=null?n:0;o=(o=(o=q.spherical_metadata)==null?void 0:o.full_pano_width_pixels)!=null?o:0;q=(q=(q=q.spherical_metadata)==null?void 0:q.full_pano_height_pixels)!=null?q:0;var y=m/n;m=m/o*Math.PI*2;o=n/q*Math.PI;if(t==null){s(new(b("Comet360PhotoTiledCubemapDataProvider"))(v,d.toString(),c,m,o));return a.fallback}n={aspectRatio:y,horizontalFov:m,projectionType:b("Comet360PhotoTypes").Comet360PhotoProjection.TiledCubemap,startingView:{heading:j(e),horizontalFov:l?j(l):null,pitch:j(f),verticalFov:k?j(k):null},tiledCubemapDataProvider:t,verticalFov:o};return h.jsxs("div",{className:"l9j0dhe7",children:[h.jsx(b("Comet360PhotoViewer.react"),{fallbackElement:a.fallback,height:i,onLoad:p,photoEncoding:n,width:i}),h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg hzruof5a n7fi1qx3 i09qtzwb",children:h.jsx(b("Comet360GyroOverlay.react"),{isVisible:u})})]})}}),null);